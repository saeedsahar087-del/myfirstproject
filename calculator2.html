<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Minimalist Calculator with History</title>
	<style>
		:root {
			--main-bg: #f8fbff;
			--panel-bg: #fff;
			--primary: #1976d2;
			--primary-light: #e3f0fd;
			--text: #222;
			--border: #e0e0e0;
			--shadow: 0 2px 12px rgba(25, 118, 210, 0.07);
		}
		html, body {
			margin: 0;
			padding: 0;
			background: var(--main-bg);
			font-family: 'Segoe UI', Arial, sans-serif;
			min-height: 100vh;
		}
		.container {
			display: flex;
			justify-content: center;
			align-items: flex-start;
			min-height: 100vh;
		}
		.calculator {
			background: var(--panel-bg);
			border-radius: 1.2rem;
			box-shadow: var(--shadow);
			padding: 1.2rem 1rem 1.5rem 1rem;
			width: 100%;
			max-width: 340px;
			margin: 2rem 0.5rem;
			display: flex;
			flex-direction: column;
			gap: 1.1rem;
			position: relative;
			z-index: 2;
		}
		.display {
			background: var(--primary-light);
			color: var(--text);
			font-size: 2rem;
			border-radius: 0.7rem;
			padding: 1.1rem 0.7rem;
			text-align: right;
			min-height: 2.7rem;
			letter-spacing: 1px;
			margin-bottom: 0.5rem;
			border: 1px solid var(--border);
			overflow-x: auto;
		}
		.buttons {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
			gap: 0.7rem;
		}
		button {
			background: var(--panel-bg);
			color: var(--primary);
			border: 1px solid var(--border);
			border-radius: 0.7rem;
			font-size: 1.2rem;
			padding: 0.9rem 0;
			cursor: pointer;
			font-weight: 500;
			transition: background 0.15s, color 0.15s;
		}
		button:active, button:focus {
			background: var(--primary-light);
			outline: none;
		}
		.btn-operator {
			color: var(--primary);
			background: #f3f8fd;
		}
		.btn-equal {
			background: var(--primary);
			color: #fff;
			grid-column: span 2;
			font-size: 1.3rem;
		}
		.btn-clear {
			color: #e53935;
		}
		.btn-backspace {
			color: #1976d2;
		}
		.btn-zero {
			grid-column: span 2;
		}
		/* Sliding History Panel */
		.history-panel {
			position: fixed;
			top: 0;
			right: -320px;
			width: 300px;
			height: 100vh;
			background: #fff;
			box-shadow: -2px 0 16px rgba(25, 118, 210, 0.08);
			border-left: 1px solid var(--border);
			transition: right 0.3s cubic-bezier(.4,2,.6,1);
			z-index: 10;
			display: flex;
			flex-direction: column;
		}
		.history-panel.open {
			right: 0;
		}
		.history-header {
			padding: 1.1rem 1rem 0.5rem 1rem;
			font-weight: 600;
			color: var(--primary);
			font-size: 1.2rem;
			border-bottom: 1px solid var(--border);
			background: #fff;
		}
		.history-list {
			flex: 1;
			overflow-y: auto;
			padding: 0.7rem 1rem;
		}
		.history-item {
			font-size: 1rem;
			color: #333;
			margin-bottom: 0.7rem;
			border-bottom: 1px solid #f0f0f0;
			padding-bottom: 0.3rem;
		}
		.history-close {
			background: none;
			border: none;
			color: var(--primary);
			font-size: 1.5rem;
			cursor: pointer;
			align-self: flex-end;
			margin: 0.5rem 1rem 0 0;
		}
		.history-toggle {
			position: absolute;
			top: 1.1rem;
			left: -2.5rem;
			background: var(--primary);
			color: #fff;
			border: none;
			border-radius: 50%;
			width: 2.2rem;
			height: 2.2rem;
			font-size: 1.3rem;
			cursor: pointer;
			box-shadow: 0 2px 8px rgba(25, 118, 210, 0.13);
			z-index: 11;
		}
		@media (max-width: 600px) {
			.container {
				flex-direction: column;
				align-items: stretch;
			}
			.calculator {
				margin: 0.5rem 0.2rem;
				max-width: 100vw;
			}
			.history-panel {
				width: 90vw;
				min-width: 220px;
				right: -92vw;
			}
			.history-panel.open {
				right: 0;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="calculator">
			<button class="history-toggle" onclick="toggleHistory()" title="Show History">≡</button>
			<div class="display" id="display">0</div>
			<div class="buttons">
				<button class="btn-clear" onclick="clearDisplay()">C</button>
				<button class="btn-backspace" onclick="backspace()">⌫</button>
				<button class="btn-operator" onclick="inputOperator('(')">(</button>
				<button class="btn-operator" onclick="inputOperator('/')">÷</button>

				<button onclick="inputNumber('7')">7</button>
				<button onclick="inputNumber('8')">8</button>
				<button onclick="inputNumber('9')">9</button>
				<button class="btn-operator" onclick="inputOperator('*')">×</button>

				<button onclick="inputNumber('4')">4</button>
				<button onclick="inputNumber('5')">5</button>
				<button onclick="inputNumber('6')">6</button>
				<button class="btn-operator" onclick="inputOperator('-')">−</button>

				<button onclick="inputNumber('1')">1</button>
				<button onclick="inputNumber('2')">2</button>
				<button onclick="inputNumber('3')">3</button>
				<button class="btn-operator" onclick="inputOperator('+')">+</button>

				<button onclick="inputNumber('0')" class="btn-zero">0</button>
				<button onclick="inputDot()">.</button>
				<button class="btn-equal" onclick="calculate()">=</button>
			</div>
		</div>
		<div class="history-panel" id="historyPanel">
			<button class="history-close" onclick="toggleHistory()" title="Close">×</button>
			<div class="history-header">History</div>
			<div class="history-list" id="historyList"></div>
		</div>
	</div>
	<script>
		let display = document.getElementById('display');
		let currentInput = '';
		let lastInput = '';
		let history = [];
		const historyPanel = document.getElementById('historyPanel');
		const historyList = document.getElementById('historyList');

		function updateDisplay() {
			display.textContent = currentInput || '0';
		}

		function inputNumber(num) {
			if (currentInput.length > 20) return;
			if (currentInput === '0') currentInput = '';
			currentInput += num;
			lastInput = num;
			updateDisplay();
		}

		function inputOperator(op) {
			if (currentInput === '' && op !== '(') return;
			if (/[-+*/.]$/.test(currentInput) && op !== '(') {
				currentInput = currentInput.slice(0, -1);
			}
			currentInput += op;
			lastInput = op;
			updateDisplay();
		}

		function inputDot() {
			let parts = currentInput.split(/[-+*/()]/);
			let last = parts[parts.length - 1];
			if (last.includes('.')) return;
			if (last === '') currentInput += '0';
			currentInput += '.';
			lastInput = '.';
			updateDisplay();
		}

		function clearDisplay() {
			currentInput = '';
			lastInput = '';
			updateDisplay();
		}

		function backspace() {
			currentInput = currentInput.slice(0, -1);
			updateDisplay();
		}

		function calculate() {
			try {
				let expression = currentInput.replace(/÷/g, '/').replace(/×/g, '*').replace(/−/g, '-');
				let result = eval(expression);
				if (result === undefined || result === null || isNaN(result)) return;
				let record = `${currentInput} = ${result}`;
				history.unshift(record);
				renderHistory();
				currentInput = result.toString();
				updateDisplay();
			} catch {
				display.textContent = 'Error';
				setTimeout(clearDisplay, 1200);
			}
		}

		function renderHistory() {
			historyList.innerHTML = '';
			if (history.length === 0) {
				historyList.innerHTML = '<div style="color:#aaa;">No history yet.</div>';
				return;
			}
			history.slice(0, 30).forEach(item => {
				let div = document.createElement('div');
				div.className = 'history-item';
				div.textContent = item;
				historyList.appendChild(div);
			});
		}

		function toggleHistory() {
			historyPanel.classList.toggle('open');
		}

		// Keyboard support
		document.addEventListener('keydown', function(e) {
			if (e.key >= '0' && e.key <= '9') inputNumber(e.key);
			else if (["+", "-", "*", "/"].includes(e.key)) inputOperator(e.key);
			else if (e.key === '.') inputDot();
			else if (e.key === 'Enter' || e.key === '=') calculate();
			else if (e.key === 'Backspace') backspace();
			else if (e.key === 'c' || e.key === 'C') clearDisplay();
			else if (e.key === '(' || e.key === ')') inputOperator(e.key);
		});
	</script>
</body>
</html>
